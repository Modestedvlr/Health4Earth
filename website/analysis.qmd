---
title: "Analyse Exploratoire Mondiale"
format:
  html:
    toc: true
    code-fold: true
    page-layout: full
jupyter: python3
---

Cette section permet d'explorer dynamiquement les tendances historiques mondiales.
**Mode d'emploi :** Les graphiques sont interactifs. Vous pouvez zoomer, et **cliquer sur les noms des pays dans la légende** à droite pour les masquer ou les isoler (double-clic).

```{python}
#| echo: false
#| warning: false
#| output: false

import plotly.express as px
import pandas as pd
from health4earth.data_ingest import load_merged_data

# Chargement des données
df = load_merged_data()

# Pour la lisibilité, on sélectionne les pays les plus peuplés + France
top_pop = df[df['year'] == 2020].sort_values('population', ascending=False).head(20)['country'].tolist()
if 'France' not in top_pop: top_pop.append('France')
df_viz = df[df['country'].isin(top_pop) & (df['year'] >= 1990)].copy()
```

## 1. Évolution des Émissions de CO₂
Analyse de la trajectoire carbone des grandes puissances industrielles.

```{python}
#| echo: false
#| warning: false
fig = px.line(df_viz, x="year", y="co2", color="country", 
              title="Émissions de CO2 (Millions de Tonnes)",
              labels={"co2": "CO2 (Mt)", "year": "Année", "country": "Pays"},
              height=500)
fig.update_layout(hovermode="x unified")
fig.show()
```

### Analyse Structurée :
Tendance : On observe une divergence nette. Les pays de l'OCDE (USA, France, Allemagne) ont amorcé une décrue de leurs émissions. À l'inverse, les économies émergentes (Chine, Inde) montrent une croissance exponentielle liée à leur industrialisation.
Points de rupture : Notez l'impact visible de la crise de 2008 et du Covid-19 (2020) sur les courbes.


## 2. Pollution Atmosphérique
Nombre total de décès attribués à la pollution de l'air (extérieure et domestique).

```{python}
#| echo: false
#| warning: false
fig = px.line(df_viz, x="year", y="pollution_deaths", color="country", 
              title="Mortalité annuelle liée à la Pollution",
              labels={"pollution_deaths": "Décès (Total)", "year": "Année"},
              height=500)
fig.update_layout(hovermode="x unified")
fig.show()
```

### Analyse Structurée :
Corrélation : Bien que la Chine émette le plus de CO2, sa courbe de mortalité liée à la pollution commence à stagner, signe de politiques sanitaires efficaces.
Paradoxe : L'Inde voit sa mortalité augmenter, corrélée à son développement urbain rapide et l'usage persistant de combustibles solides.


## 3. Mortalité Respiratoire (Focus)
Visualisation spécifique de l'impact sur la santé respiratoire.

```{python}
#| echo: false
#| warning: false
# Ici on utilise la même colonne pollution_deaths comme proxy, ou une autre si disponible dans vos données fusionnées
fig = px.area(df_viz, x="year", y="pollution_deaths", color="country", 
              title="Volume cumulé des décès (Pollution)",
              height=500)
fig.show()
```

### Analyse Structurée :
Ce graphique en aires empilées montre le poids relatif de chaque pays dans le bilan mondial. L'Asie représente aujourd'hui la majeure partie du fardeau sanitaire environnemental.


## 4. Espérance de Vie
L'indicateur synthétique de santé publique.

```{python}
#| echo: false
#| warning: false
fig = px.line(df_viz, x="year", y="life_expectancy", color="country", 
              title="Espérance de Vie à la naissance",
              labels={"life_expectancy": "Âge (Années)", "year": "Année"},
              height=500)
fig.update_yaxes(range=[50, 90]) # Zoom sur la plage utile
fig.show()
```

### Analyse Structurée :
Convergence : On note un rattrapage progressif des pays émergents vers les standards occidentaux (environ 80 ans).
Résilience : Malgré la pollution, l'espérance de vie augmente globalement grâce aux progrès médicaux, prouvant que la technologie compense en partie les dégradations environnementales.



## Annexe : Code Source
Le code ayant généré ces graphiques est disponible ci-dessous.